/*!
 * Copyright (c) 2016 Luminis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
 * OR OTHER DEALINGS IN THE SOFTWARE.
 */
var module=angular.module("http-error-interceptor",["pascalprecht.translate","translations-interceptor","toastr"]),Common;!function(t){var e=function(){function t(t,e,r,n,o){"ngInject";var a=this;this.$injector=t,this.$q=e,this.toastr=r,this.$filter=n,this.$window=o,this.request=function(t){return t},this.requestError=function(t){var e=a.$filter("translate")("CONNECTION_ERROR"),r=a.$filter("translate")("SERVER_ERROR_TITLE"),n=t.data.message||a.$filter("translate")("UNKNOWN_ERROR"),o=e+n;return a.toastr.error(o,r),a.$q.reject(t)},this.response=function(t){return t},this.responseError=function(t){if(401===t.status)a.toastr.warning(a.$filter("translate")("LOGGED_OUT_BY_SYSTEM")),a.$window.location.reload(!0);else{var e=a.$filter("translate")("SERVER_ERROR"),r=a.$filter("translate")("SERVER_ERROR_TITLE"),n=t.data.message||a.$filter("translate")("UNKNOWN_ERROR"),o=e+n;a.toastr.error(o,r,{timeOut:0,extendedTimeOut:0,closeButton:!0})}return a.$q.reject(t)}}return t.$inject=["$injector","$q","toastr","$filter","$window"],t.Factory=["$injector","$q","toastr","$filter","$window",function(e,r,n,o,a){"ngInject";return new t(e,r,n,o,a)}],t}();t.HttpErrorInterceptor=e}(Common||(Common={})),module.factory("httpErrorInterceptor",Common.HttpErrorInterceptor.Factory),module.config(["$httpProvider","$translateProvider",function(t,e){t.interceptors.push("httpErrorInterceptor"),e.preferredLanguage("nl"),e.useSanitizeValueStrategy("escaped")}]),angular.module("translations-interceptor",[]).config(["$translateProvider",function(t){t.translations("en",{SERVER_ERROR:"The server returned an error: ",CONNECTION_ERROR:"Could not connect to server",SERVER_ERROR_TITLE:"Error",UNKNOWN_ERROR:"An unknown error has occurred. Please contact your system administrator.",LOGGED_OUT_BY_SYSTEM:"You're logged out due to long inactivity. You'll be redirected"}),t.translations("nl",{SERVER_ERROR:"De server heeft een fout terug gegeven: ",CONNECTION_ERROR:"Er kon geen contact worden opgenomen met de server",SERVER_ERROR_TITLE:"Fout",UNKNOWN_ERROR:"Er is een onbekende fout opgetreden. Neem contact op met uw systeem administrator.",LOGGED_OUT_BY_SYSTEM:"Vanwege lange inactiviteit bent u uitgelogd. U wordt nu omgeleid."})}]);